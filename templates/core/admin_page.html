{% extends "core/base.html" %}
{% load static %}

{% block title %}<title>Administracja</title>{% endblock%}
{% block stylings %}
    <style type="text/css">
        .shadow-text{
            text-shadow: 4px 4px 2px rgba(14, 14, 14, 0.1);
        }
        .page-section{
            padding: 4rem 0;
        }
        .data_header{
            padding: 2.5%;
        }
        .data_item{
            padding: 2%;
        }
        .item_border{
            border-top: 1px solid grey;
            border-right: 1px solid grey;
        }
        tbody{
            border-radius: 20px;
            box-shadow: 6px 4px 10px 4px rgb(244 98 58);
        }
    </style>
    <link href="{% static 'css/form_styles.css'%}" rel="stylesheet" />
    <link href="{% static 'css/gallery_styles.css'%}" rel="stylesheet" />
{% endblock %}
{% block navbar_class %}navbar-shrink{% endblock %}
{% block content %}
    <div style="background:white; padding-top: 10rem;">
        <div class = "container2" style='color:black; font-family:"SEGOE UI";'>
            {% if messages %}
                {% for message in messages %}
                    <div 
                    class="alert alert-{{ message.tags }}"
                    style="margin: 0 auto; max-width:50%;margin-bottom:20px;">
                        {{ message }}
                        <br>
                    </div>
                {% endfor %}
            {% endif %}
            <h1 class="text-center mb-5 shadow-text">Panel administracji</h1>
            <div style="display:grid;">
                <div 
                class="admin_controls" 
                style="grid-row-start:1; grid-column-start:1;">
                    <div class="mb-5">
                        <h6 class="mb-2 shadow-text">
                            Formularz dodawania nowego lokalu
                        </h6>
                        <a 
                        class="btn btn-primary btn-xl" 
                        style="height:50px; font-size:0.7rem;" 
                        href="/administracja/dodaj_lokal">
                            Przejdź
                        </a>
                    </div>
                    <div class="mb-5">
                        <h6 class="mb-2 shadow-text">
                            Formularz zmiany liczb w licznikach
                        </h6>
                        <a 
                        class="btn btn-primary btn-xl" 
                        style="height:50px; font-size:0.7rem;" 
                        href="/administracja/liczniki">
                            Przejdź
                        </a>
                    </div>
                </div>
                <div 
                style="margin: 0px auto; 
                grid-row-start:1; 
                grid-column-start:2;">
                    <table>
                    {% if not data_fail %}
                        <tr>
                            <th colspan="3" 
                            class="text-center
                             data_header
                             shadow-text
                             title_border_bottom">
                                Statystyka wyświetleń strony w ciągu ostatnich:
                            </th>
                        </tr>
                        {% if not requests_per_timeframe %}
                            <tr>
                                <td 
                                class="text-center 
                                data_item 
                                shadow-text"
                                style="border-top: 1px solid grey">
                                    Kliknij ponownie na zakładke admin aby załadować dane
                                </td>
                            </td>
                        {% else %}
                            <tr style="text-center">
                                <th class="text-center 
                                data_header
                                shadow-text 
                                item_border">
                                    24 godzin
                                </th>
                                <th class="text-center 
                                data_header 
                                shadow-text 
                                item_border">
                                    7 dni
                                </th>
                                <th class="text-center data_header shadow-text"
                                style="border-top: 1px solid grey">
                                    30 dni
                                </th>
                            </tr>
                    
                            <tr>
                                <td class="text-center 
                                data_item 
                                shadow-text 
                                item_border">
                                    {{requests_per_timeframe.2}}
                                </td>
                                <td class="text-center 
                                data_item 
                                shadow-text 
                                item_border">
                                    {{requests_per_timeframe.1}}
                                </td>
                                <td class="text-center data_item shadow-text"
                                style="border-top: 1px solid grey">
                                    {{requests_per_timeframe.0}}
                                </td>
                            </tr>
                        {% endif %}
                    {% else %}
                        <tr>
                            <th class="text-center
                            data_header
                            shadow-text
                            title_border_bottom">
                                Błąd podczas importu danych z cloudflare.
                            </th>
                        </tr>
                    {% endif %}
                    </table>
                </div>
            </div>
        </div>
    </div>

{% endblock %}